{
    "$schema": "https://raw.githubusercontent.com/rdkcentral/rdkservices/main/Tools/json_generator/schemas/interface.schema.json",
    "jsonrpc": "2.0",
    "info": {
        "title": "HdmiCec API", 
        "class": "org.rdk.HdmiCec", 
        "description": "The `HdmiCec` plugin allows you to configure HDMI Consumer Electronics Control (CEC) on a set-top device. HdmiCec plugin can be used on an HDMI Source device where the application has complete control on implementing the CEC messages, and Thunder plugin provides the transport mechanism to send and receive the messages to other CEC devices in the network."
    },
    "common": {
        "errors": {
            "general": {
                "code": 1,
                "message": "ERROR_GENERAL"
            },
            "unavailable": {
                "code": 2,
                "message": "ERROR_UNAVAILABLE"
            },
            "asyncfailed": {
                "code": 3,
                "message": "ERROR_ASYNC_FAILED"
            },
            "asyncaborted": {
                "code": 4,
                "message": "ERROR_ASYNC_ABORTED"
            },
            "illegalstate": {
                "code": 5,
                "message": "ERROR_ILLEGAL_STATE"
            },
            "openingfailed": {
                "code": 6,
                "message": "ERROR_OPENING_FAILED"
            },
            "acceptfailed": {
                "code": 7,
                "message": "ERROR_ACCEPT_FAILED"
            },
            "pendingshutdown": {
                "code": 8,
                "message": "ERROR_PENDING_SHUTDOWN"
            },
            "alreadyconnected": {
                "code": 9,
                "message": "ERROR_ALREADY_CONNECTED"
            },
            "connectionclosed": {
                "code": 10,
                "message": "ERROR_CONNECTION_CLOSED"
            },
            "timedout": {
                "code": 11,
                "message": "ERROR_TIMEDOUT"
            },
            "inprogress": {
                "code": 12,
                "message": "ERROR_INPROGRESS",
                "description": "Operation in progress"
            },
            "couldnotsetaddress": {
                "code": 13,
                "message": "ERROR_COULD_NOT_SET_ADDRESS"
            },
            "incorrecthash": {
                "code": 14,
                "message": "ERROR_INCORRECT_HASH",
                "description": "Incorrect hash given"
            },
            "incorrecturl": {
                "code": 15,
                "message": "ERROR_INCORRECT_URL",
                "description": "Incorrect URL given"
            },
            "invalidinputlength": {
                "code": 16,
                "message": "ERROR_INVALID_INPUT_LENGTH"
            },
            "destructionsucceeded": {
                "code": 17,
                "message": "ERROR_DESTRUCTION_SUCCEEDED"
            },
            "destructionfailed": {
                "code": 18,
                "message": "ERROR_DESTRUCTION_FAILED"
            },
            "closingfailed": {
                "code": 19,
                "message": "ERROR_CLOSING_FAILED"
            },
            "processterminated": {
                "code": 20,
                "message": "ERROR_PROCESS_TERMINATED"
            },
            "processkilled": {
                "code": 21,
                "message": "ERROR_PROCESS_KILLED"
            },
            "unknownkey": {
                "code": 22,
                "message": "ERROR_UNKNOWN_KEY"
            },
            "incompleteconfig": {
                "code": 23,
                "message": "ERROR_INCOMPLETE_CONFIG"
            },
            "privilegedrequest": {
                "code": 24,
                "message": "ERROR_PRIVILEGED_REQUEST"
            },
            "rpccallfailed": {
                "code": 25,
                "message": "ERROR_RPC_CALL_FAILED"
            },
            "unreachablenetwork": {
                "code": 26,
                "message": "ERROR_UNREACHABLE_NETWORK"
            },
            "requestsubmitted": {
                "code": 27,
                "message": "ERROR_REQUEST_SUBMITTED"
            },
                "unknowntable": {
                "code": 28,
                "message": "ERROR_UNKNOWN_TABLE"
            },
            "duplicatekey": {
                "code": 29,
                "message": "ERROR_DUPLICATE_KEY"
            },
            "badrequest": {
                "code": 30,
                "message": "ERROR_BAD_REQUEST"
            },
            "pendingconditions": {
                "code": 31,
                "message": "ERROR_PENDING_CONDITIONS"
            },
            "surfaceunavailable": {
                "code": 32,
                "message": "ERROR_SURFACE_UNAVAILABLE"
            },
            "playerunavailable": {
                "code": 33,
                "message": "ERROR_PLAYER_UNAVAILABLE"
            },
            "firstresourcenotfound": {
                "code": 34,
                "message": "ERROR_FIRST_RESOURCE_NOT_FOUND"
            },
            "secondsourcenotfound": {
                "code": 35,
                "message": "ERROR_SECOND_RESOURCE_NOT_FOUND"
            },
            "alreadyreleased": {
                "code": 36,
                "message": "ERROR_ALREADY_RELEASED"
            },
            "negtiveacknowledge": {
                "code": 37,
                "message": "ERROR_NEGATIVE_ACKNOWLEDGE"
            },
            "invalidsignature": {
                "code": 38,
                "message": "ERROR_INVALID_SIGNATURE"
            },
            "readerror": {
                "code": 39,
                "message": "ERROR_READ_ERROR"
            },
            "writeerror": {
                "code": 40,
                "message": "ERROR_WRITE_ERROR"
            },
            "invaliddesignator": {
                "code": 41,
                "message": "ERROR_INVALID_DESIGNATOR"
            },
            "unauthenticated": {
                "code": 42,
                "message": "ERROR_UNAUTHENTICATED"
            },
            "notexist": {
                "code": 43,
                "message": "ERROR_NOT_EXIST"
            },
            "notsupported": {
                "code": 44,
                "message": "ERROR_NOT_SUPPORTED"
            }
        },
        "results": {
            "void": {
                "type": "null",
                "default": null,
                "description": "Always null"
            }
        },
        "result": {
            "type":"object",
            "properties": {
                "success": {
                    "$ref": "#/common/success"
                }
            },
            "required": [
                "success"
            ]
        },
        "success": {
            "summary": "Whether the request succeeded",
            "type": "boolean",
            "example": "true"
        }
    },
    "definitions": {
        "enabled": {
            "summary": "Indicates whether HDMI-CEC is enabled (`true`) or disabled (`false`)",
            "type":"boolean",
            "example": false
        },
        "physicalAddress":{
            "summary": "The physical IP address of the device",
            "type":"array",
            "items": {
                "type": "string",
                "example": "255, 255, 255, 255"
            }
        },
        "message":{
            "summary": "The message is a base64 encoded byte array of the raw CEC bytes. The CEC message includes the device ID for the intended destination.",
            "type": "string",
            "example": "1234567890" 
        },
        "logicalAddress":{
            "summary": "Logical address of the device",
            "type":"integer",
            "example": 0
        },
        "osdName":{
            "summary": "OSD name of the device",
            "type":"string",
            "example": "TV"
        },
        "vendorID":{
            "summary": "Vendor ID of the device",
            "type":"string",
            "example": "00f0"
        },
        "status": {
            "summary": "`true` if device is active source, otherwise `false`",
            "type": "boolean",
            "example": "true"
         }
    },
    "methods": {
        "getActiveSourceStatus":{
            "summary": "Gets the active source status of the device.",
            "params": {
                "type":"object",
                "properties": {
                    "status": {
                       "$ref": "#/definitions/status"
                    }
                },
                "required": [
                    "status"
                ]
            },
            "result": {
                "$ref": "#/common/result"
            }
        },
        "getCECAddresses":{
            "summary": "Returns the HDMI-CEC addresses that are assigned to the local device.",
            "result": {
                "type": "object",
                "properties": {
                    "CECAddresses": {
                        "summary": "An object that includes both the physical and logical HDMI-CEC addresses.",
                        "type":"object",
                        "properties": {
                            "physicalAddress":{
                                "$ref": "#/definitions/physicalAddress"
                            },
                            "deviceType": {
                                 "summary": "The type of device",
                                 "type": "string",
                                 "example": "Tuner"
                            },
                            "logicalAddress": {
                                 "summary": "The logical address of the device",
                                 "type": "integer",
                                 "example": 3
                            }
                        },
                        "required": [
                            "physicalAddress",
                            "deviceType",
                            "logicalAddress"
                        ]
                    },
                    "success": {
                        "$ref": "#/common/success"
                    }
                },
                "required": [
                    "CECAddresses",
                    "success"
                ]
            }
        },
        "getDeviceList":{
            "summary": "Gets the list of number of CEC enabled devices connected and system information for each device. The information includes logicalAddress,OSD name and vendor ID.",
            "result": {
                "type": "object",
                "properties": {
                    "numberofdevices": {
                        "summary": "number of devices in the `deviceList` array", 
                        "type": "integer",
                        "example": 1
                    },
                    "deviceList":{
                        "summary": "Object [] of information about each device",
                        "type":"array",
                        "items": {
                            "type": "object",
                            "properties": {
                                "logicalAddress": {
                                    "$ref": "#/definitions/logicalAddress"
                                },
                                "osdName":{
                                    "$ref": "#/definitions/osdName"
                                },
                                "vendorID":{
                                    "$ref": "#/definitions/vendorID"
                                }
                            },
                            "required": [
                                "logicalAddress",
                                "osdName",
                                "vendorID"
                            ]
                        }
                    },
                    "success": {
                        "$ref": "#/common/success"
                    }
                },
                "required": [
                    "numberofdevices",
                    "deviceList",
                    "success"
                ]
            }
        },
        "getEnabled": {
            "summary": "Returns whether HDMI-CEC is enabled.",
            "result": {
                "type": "object",
                "properties": {
                    "enabled": {
                        "$ref": "#/definitions/enabled"
                    },
                    "success": {
                        "$ref": "#/common/success"
                    }
                },
                "required": [
                    "enabled",
                    "success"
                ]
            }
        },
        "sendMessage":{
            "summary": "Writes HDMI-CEC frame to the driver.",
             "events": {
                    "onMessage" : "Triggered when a message is sent from an HDMI device"
             },
            "params": {
                "type":"object",
                "properties": {
                    "message":{
                        "$ref": "#/definitions/message"
                    }
                },
                "required": [
                    "message"
                ]
            },
            "result": {
                "$ref": "#/common/result"
            }
        },
        "setEnabled":{
            "summary": "Enables or disables HDMI-CEC driver.",
            "params": {
                "type":"object",
                "properties": {
                    "enabled":{
                        "$ref": "#/definitions/enabled" 
                    }
                },
                "required": [
                    "enabled"
                ]
            },
            "result": {
                "$ref": "#/common/result"
            }
        }
    },
    "events": {
        "cecAddressesChanged":{
            "summary": "Triggered when the address of the host CEC device has changed",
            "params": {
                "type":"object",
                "properties": {
                    "CECAddresses": {
                        "summary": "Includes either the `physicalAddress` or `logicalAddresses`",
                        "type":"object",
                        "properties": {
                            "physicalAddress":{
                                "$ref": "#/definitions/physicalAddress"
                            }
                        }
                    }
                },
                "required": [
                    "CECAddresses"
                ]
            }
        },
        "onActiveSourceStatusUpdated":{
            "summary": "Triggered when device active source status changes",
            "params": {
                "type":"object",
                "properties": {
                    "status": {
                        "$ref": "#/definitions/status"  
                    }
                },
                "required": [
                    "status"
                ]
            }
        },
        "onDeviceAdded": {
            "summary": "Triggered when an HDMI cable is physically connected to the HDMI port on a TV, or the power cable is connected to the source device.  After a new device is hotplugged to the port, various information such as OSD name and vendor ID is collected.The `onDeviceAdded` event is sent as soon as any of these details are available. However, the connected device sends the information asynchronously; therefore, the information may not be collected immediately.",
            "params": {
                "type":"object",
                "properties": {
                    "logicalAddress": {
                        "$ref": "#/definitions/logicalAddress"
                    }
                },
                "required": [
                    "logicalAddress"
                ]
            }
        },
        "onDeviceInfoUpdated": {
            "summary": "Triggered when device information changes (vendorID, osdName)",
            "params": {
                "type":"object",
                "properties": {
                    "logicalAddress": {
                        "$ref": "#/definitions/logicalAddress"
                    }
                },
                "required": [
                    "logicalAddress"
                ]
            }            
        },
        "onDeviceRemoved": {
            "summary": "Triggered when HDMI cable is physically removed from the HDMI port on a TV or the power cable is removed from the source device. The device is considered removed when no ACK messages are received after pinging the device.",
            "params": {
                "type":"object",
                "properties": {
                    "logicalAddress": {
                        "$ref": "#/definitions/logicalAddress"
                    }
                },
                "required": [
                    "logicalAddress"
                ]
            }
        },
        "onMessage":{
            "summary": "Triggered when a message is sent from an HDMI device",
            "params": {
                "type":"object",
                "properties": {
                    "message": {
                        "$ref": "#/definitions/message"
                    }
                },
                "required": [
                    "message"
                ]
            }
        }
    }
}
